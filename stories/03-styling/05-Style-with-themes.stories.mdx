<Meta title="Features|Style with Themes" />

# Styling with Themes
Themes are one of a variety of ways that styling can be applied in Irving. Themes can be used in conjunction with the `@irvingjs/styled-components` package or with Irving's core styling setup as an elegant and efficient way to include your styles. It's also possible to style using a `className` or a `style` prop.

## So, what's a theme?
A theme in the Irving sense can be one of two things, depending on whether or not you're using the `styled-components` package:
* Using `styled-components`, themes are a method of replacing one or more styled-components in an Irving component's JSX with your own.
* Using Irving core alone, themes are a method of replacing one or more classnames in a component's stylesheet with your own.

Irving's theming functionality may not work quite the way you expect from other themeing methods you have used in the past, and should not be confused with the [theme functionality built in to Styled Components](https://styled-components.com/docs/advanced#theming). Styled Components' built-in theming can be used as well, but is entirely separate from Irving's themes.

### Theming components in the `styled-components` package
An assortment of minimally-styled components is included in Irving's [`styled-components` package](?path=/docs/features-available-packages--page#styled-components). Styles are easily overwritten by providing Irving with your own custom themes.

Each styled-component's configuration includes a theme property that maps to the default style included in the component package. For example, the default.js theme for the container component is:

```js
import styled from 'styled-components';

export const ContainerWrapper = styled.div`
  margin: auto;
  width: 100%;
`;

```
To find all the styled components available and their default themes, look in: `client/irving/node_modules/@irvinjs/styled-components/components` — each component includes a `themes` folder containing a `default.js` file, which renders the basic "out of the box" styling.

Some guidelines and standards we recommend for setting up themes:
* Use a `themes` directory in the root of your project (`<projectName>/wp-content/themes/<projectTheme>/client/irving`) with an `index.js` file within. It's a good practice to organize your themes by component name, so to style a container, for example, create a `container` directory within the `themes` directory.
* Import all of your themes into to the `themes/index.js` file.
* Ensure a `themeName` prop is passed either directly or via API to the component you'd like to theme. That `themeName` prop should correspond to the key to which you've assigned your custom theme in the object exported from your `themes/index.js` file.

Some requirements for themes to work with Irving's `styled-components` package:
* Theme files containing your styled components definitions _must_ either export an object. This can either be a series of named exports or an actual JavaScript object.
* If you use a series of named exports in your theme file you must import this via `import * as myTheme from ...`, where `myTheme` will become your theme object.
* Names of styled components in your theme file _must_ be identical to the names of styled components in the component's default theme in order to be properly applied.
* Your `themes/index.js` file _must_ export an object. At the top level of this object, keys should be component names and values should be an object of custom themes to provide to the Irving styled component. Example:
```js
import * as myCustomThemeObject from './container/myCustomThemeObject';

export default {
  'irving/container': {
    themeName: myCustomThemeObject,
  }
}

```
* Your theme files _does not_ have to export a corresponding component for _every_ styled component defined in the default theme, but if it doesn't the default version of that component will be used to prevent errors.

The styled-components's `default.js` is the best place to start when writing your own theme so copy it from the `node_modules/@irvingjs/styled-components/components/<component-to-theme>/themes` folder. From there, add or subtract any styles you like. You can overwrite the default behavior by naming your custom theme `default.js` or keep the default behavior and add as many theme variants as you need.

For example, you might want a flex container around a section, that is 90% wide with a yellow background. In order to point your app to your custom theme, your API json might look like:

```json
{
  "name": "irving/container",
  "config": {
    "theme_name": "yellow-section",
  },
}
```

Or, if using WordPress and `wp-irving`, your template JSON might contain the following component definition:
```json
{
  "name": "irving/container",
  "theme": "yellow-section",
}
```

Next, create a folder for container themes and a file with your styling for this container theme called: `yellowSection.js`. Note that if you are using `wp-irving`, any themes containing hyphens (`-`) or underscores (`_`) in your json templates will be converted to camelCase (e.g. a theme of `yellow-section` becomes `yellowSection`) before producing endpoint data.

```js
import styled from 'styled-components';

export const ContainerWrapper = styled.section`
  background: yellow;
  display: flex;
  width: 90%;
`;
```

We recommend a folder structure like this:
```
  my-irving-project\
    themes\
      container\
        yellowSection.js
      index.js

```

Next step: import your custom theme to the themes' folder `index.js` file:

```js
import * as yellowSection from './container/yellowSection';

export default {
  'irving/container': {
    yellowSection,
  }
}

```
That's it! A lovely feature of Irving is that as you noodle with your styling, the app hot reloads the styling without the need to refresh your browser. Very handy. However, templates and template parts are not hot-reloaded, so save and refresh after you have applied a theme to your component.

### Theming your own styled component
If you have a custom component that makes use of Styles Components in your Irving project you can still leverage Irving's theming functionality via the [`withThemes`](https://github.com/alleyinteractive/irving/blob/master/packages/styled/components/hoc/withThemes.js) higher-order component (HOC) within the `@irvingjs/styled` package. Unlike the `withThemes` HOC in Irving core, the `styled` version is somewhat simpler. A component using this HOC might look like the following:

```js
import React from 'react';
import withThemes from '@irvingjs/styled/components/hoc/withThemes';
import * as defaultStyles from './themes/default';
import * as customThemeStyles from './themes/customTheme';

const MyComponent = (props) => {
  const { theme } = props;
  const { Wrapper, Content } = theme;

  return (
    <Wrapper>
      <Content>
        This is my component content
      </Content>
    </Wrapper>
  );
};

const themeMap = {
  default: defaultStyles,
  custom: customThemeStyles,
};

export default withThemes(themeMap)(Container);
```

As illustrated above, the `withThemes` HOC requires only a theme mapping object in which keys are a theme name and values are objects containing theme components. This HOC will provide a `theme` prop to the component to which the HOC is applied. This prop is an object on which both keys and values are the same (the name of each component function).

As you may have noted already, the `withThemes` prop for styled components doesn't actually _require_ or integrate directly with styled components at all—it merely expects each value of the theme object to be a React component. This means that, for most intents and purposes, you will probably just supply an object of styled components in your theme. However, you can get creative if you want to (and at your own risk) by supplying any React component at all and, as long as the component is named the same as one of the theme values used in the themed component itself, it will be applied as-is. Be sure to render `children` as necessary, otherwise you may end up with chunks of your component that don't render (unless this is what you want!).

### Theming components using Irving Core's CSS
Themes can be applied in a similar way using Irving's styling functionality built in to Irving Core. This is accomplished by leveraging Core's built-in [CSS Modules functionality via `css-loader`](https://webpack.js.org/loaders/css-loader/#modules), which exports an object of `className` values from a CSS file which we can then manipulate to create a theme. Core itself does not contain any themable components—instead it offers you the means to theme your own components via a [`withThemes`](https://github.com/alleyinteractive/irving/blob/master/packages/core/components/hoc/withThemes.js) higher-order component (HOC). An example of what that might look like is:

```js
import React from 'react';
import withThemes from '@irvingjs/core/components/hoc/withThemes';
import defaultTheme from './themes/default.css';
import customTheme from './themes/customTheme.css';

const MyComponent = (props) => {
  const { theme } = props;

  return (
    <div className={theme.wrapper}>
      <span className={theme.content}>This is the component content</span>
    </div>
  )
}

export default withThemes(
  'component-identifier',
  {
    default: defaultTheme,
    custom: customTheme,
  },
  true // composes
)(MyComponent);
```

As illustrated above, the `withThemes` HOC requires:
* A unique identifier. This is used for pulling a component's themes out of a context provider.
* An object map of the component's available themes.
* An optional `composes` boolean flag. If this is turned on, theme classes will be _added_ to default classes instead of replacing them, effectively using the default theme as a basis for all other themes.

This HOC will provide the following functionality to the component on which it is applied:
* A `theme` prop containing the classNames of the current theme (either `composed` or not, depending on if the flag is set).
* Allow the `theme` prop to be derived in one of three ways:
  * Pulled out of the component's predefined theme mapping using a `themeName` prop to access the appropriate key in the mapping object.
  * Pulled out of React Context using the `indentifier` supplied to the HOC to access the necessary `themeName`, which will be in turn used to access the `theme` via the theme mapping object.
  * Supplied directly to the component via a `theme` prop.

Also illustrated above you can see the `className` values on the theme itself are accessed like an object, just as you would with css modules. Note that if a theme does not supply a `className` to override every class used in the component, the `className` value from the default theme will be used. The markup in the above example should look something like this (note that `composes` is set to true in this example):

```html
<div class="default__wrapper__1n274 customTheme__wrapper__n38f7">
  <span class="default__content__v7892 customTheme__content__dkvus">This is the component content</span>
</div>
```

That's it! As you can see, theming with Irving Core is relatively similar to theming with `styled-components`. Happy styling!

## Additional notes on providing themes via WP-Irving

Extending the styled-component theming plan, themes can also be applied to components in [WP Irving](https://github.com/alleyinteractive/wp-irving), the WordPress plug in to Irving. Components like post-list, site-menu, social sharing, etc., can be themed by determining the styled-component **alias** for that component and theming that component.

For example `irving/post-title` is an alias for the `irving/text` component and can be themed via that component. You may apply a theme that already exists, like `h1`, or one you make a custom theme like `special-post-title`. If it's not obvious what the alias might be, use the WordPress editor to check the component's API and you'll see something like this:

```json
{
"name": "irving/post-title",
"_alias": "irving/text",
...
}
```

or

```json
{
"name": "irving/post-permalink",
"_alias": "irving/link",
...
},
```
which will help you to find the right styled component to theme.
